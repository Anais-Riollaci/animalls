<?phpnamespace App\Controller\Admin;use App\Repository\CategoryRepository;use Doctrine\ORM\EntityManagerInterface;use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;use Symfony\Component\Form\Extension\Core\Type\SubmitType;use Symfony\Component\Form\Extension\Core\Type\TextType;use Symfony\Component\HttpFoundation\Request;use Symfony\Component\Routing\Annotation\Route;class GestionCategoryController extends AbstractController{    /**     * @Route("/gestion/category", name="gestion_category")     */    public function GestionCategory(EntityManagerInterface $manager, CategoryRepository $categoryRepository)    {        $categoryFromDb = $categoryRepository->findAll();        return $this->render('gestion/GestionCategory.html.twig',            ['categories' => $categoryFromDb]        );    }    /**     * @Route("/change/category/{id}")     */    public function change($id, CategoryRepository $categoryRepository, EntityManagerInterface $manager, Request $request)    {        $category = $categoryRepository->find($id);        $form = $this->createFormBuilder()            ->add('title', TextType::class)            ->add('save', SubmitType::class, [                'label' => 'Enregistrer la modification'            ])            ->getForm();        $form->handleRequest($request);        if ($form->isSubmitted()) {            $category->setTitle($form->getData()["title"]);            $manager->persist($category);            $manager->flush();            $this->addFlash('success', 'La catégorie est enregistrée');            return $this->redirectToRoute("gestion_category");        } else {            $form->get("title")->setData($category->getTitle());        }        return $this->render('gestion/ModificationForm.html.twig',            ['Modification' => $form->createView()]        );    }    /**     * @Route("/delete/category")     */    public function delete(CategoryRepository $categoryRepository, EntityManagerInterface $manager, Request $request)    {        $category = $categoryRepository->findAll();        // suppression en bdd        $manager->remove($category);        $manager->flush();        $this->addFlash('success', 'La catégorie est supprimée');    }    /**     * @Route("/new/category")     */    public function new(CategoryRepository $categoryRepository, EntityManagerInterface $manager)    {        $form = $this->createFormBuilder()            ->add('title', TextType::class)            ->add('save', SubmitType::class, [                'label' => 'Enregistrer la modification'            ])            ->getForm();        return $this->render('gestion/GestionCategory.html.twig',            ['NewCategory' => $form->createView()]        );//        $category = new Category();//        $category->setTitle();////        $manager->persist($category);    }}